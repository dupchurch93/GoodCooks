extends layout

append head
  //- add page specific styles by appending to the head
  link(rel="stylesheet" href="/stylesheets/index.css")
  //- add page specific js
  //- script(src="/javascripts/index.js" type="module" defer)

block content
  div(id='errors')
  div(class='main-body')
    div(class='main-body__user-column main-body__main-column core-display')
      h4 Find your favorite recipes and check out what is in your cupboards.
      div Which direction does this go?
      div And this?
      img(class='recipe-image', alt='burrito', src='./images/buritos.jpg')
      div Updates
    div(class='main-body__recipe-column main-body__main-column core-display')
      h4 Try out these great recipes below...
      each recipe in normalizedRecipes
        div(class='recipe recipe-card recipe-title')
          a(class='recipe recipe-image', href=`/recipes/${recipe.id}`)
            img(class='recipe', width= '500px', height= '400px', alt= recipe.name, src= recipe.link)
          div(class='recipe recipe-content')
            h1: a(class='recipe recipe-title', href=`/recipes/${recipe.id}`)= recipe.name
            h2 by #{recipe.author}
            p(class='recipe recipe-description', width= '500px', height= '400px',)= recipe.description
            if locals.authenticated
              if recipe.status.saved
                button(class='recipe-save button', id=`recipe:${recipe.id}.cupboard:${user.Cupboards[0].id}`, type='submit') Unsave Recipe
              else
                button(class='recipe-save button', id=`recipe:${recipe.id}.cupboard:${user.Cupboards[0].id}`, type='submit') Save Recipe
              if recipe.status.cooked
                button(class='recipe-cooked button', id=`cookedrecipe:${recipe.id}.cupboard:${user.Cupboards[0].id}`, type='submit') Remove from Cooked
              else
                button(class='recipe-cooked button', id=`cookedrecipe:${recipe.id}.cupboard:${user.Cupboards[0].id}`, type='submit') Add to Cooked
              if recipe.status.favorited
                button(class='recipe-favorited button', id=`favoriterecipe:${recipe.id}.cupboard:${user.Cupboards[0].id}`, type='submit') Unfavorite
              else
                button(class='recipe-favorited button', id=`favoriterecipe:${recipe.id}.cupboard:${user.Cupboards[0].id}`, type='submit') Favorite
              if recipe.status.starRating
                div
                  - let n = 5
                  div(class='rating')
                    span(class='rating__button rating__delete fa fa-minus-circle', id=`recipe:${recipe.id}`)
                    while n > recipe.status.starRating
                      span(class='rating__button fa fa-star', id=`recipe:${recipe.id}.star:${n}`)
                      - n--
                    - let m = recipe.status.starRating
                      while m >= 1
                        span(class='rating__button fa fa-star checked', id=`recipe:${recipe.id}.star:${m}`)
                        - m--
              else
                div(class='rating')
                  span(class='rating__button fa fa-star', id=`recipe:${recipe.id}.star:5`)
                  span(class='rating__button fa fa-star', id=`recipe:${recipe.id}.star:4`)
                  span(class='rating__button fa fa-star', id=`recipe:${recipe.id}.star:3`)
                  span(class='rating__button fa fa-star', id=`recipe:${recipe.id}.star:2`)
                  span(class='rating__button fa fa-star', id=`recipe:${recipe.id}.star:1`)
    div(class='main-body__news-column main-body__main-column core-display')
      h4 Best Recipes, cooks and more!
      div Recipe of 2020
      div Worst recipe of 2020? Find out here
      div Our editor's favorite chefs
  script(src='/javascripts/saveRecipe.js' type="module" defer)
  script(src='/javascripts/rateRecipe.js' type="module" defer)
